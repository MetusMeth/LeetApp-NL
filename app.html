<!DOCTYPE html>
<html>
<head>
    <title>Leet Hotel</title>
    <link rel="stylesheet" type="text/css" href="assets/css/app.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/alert.css">
</head>
<body>
<div id="alert" class="alert">
	<div class="box">
		<div class="title">Weet je het zeker?</div>
		<div id="description" class="description">We zullen de LeetApp opnieuw opstarten tijdens het legen van de cache.</div>
		<div class="btns">
			<div id="cancel" class="button" style="float:left;background: #ed1c24;">
				<div class="alpha"></div>
				Annuleer
			</div>

			<div id="confirm" class="button">
				<div class="alpha"></div>
				Bevestig
			</div>
		</div>
	</div>
</div>
<div id="updater" class="updater">
	<div class="loading-container">
		<div id="loading-background"></div>
		<div class="loading-content">
			<div class="center">
				<span></span>
				<img src="assets/img/loading.gif">
			</div>
			<div id="connection" class="loading-bodytext">Leet is aan het <font id="progression" class="progression">laden...</font></div>
			<div class="loading-bodytext">
			<div id="version" class="version"></div></div>
		</div>
	</div>
	<div class="page-loading"></div>
</div>
<iframe id="home-frame" width="100%" src="https://www.leet.ws/?app=true"></iframe>
<div class="buttons">
	<div id="home" class="button">
		<div class="icon home"></div>
		<div class="tooltip">
			<div class="arrow"></div>
			Home
		</div>
	</div>
	<div id="hotel" class="button">
		<div class="icon hotel"></div>
		<div class="tooltip">
			<div class="arrow"></div>
			Hotel
		</div>
	</div>
	<div id="screen" class="button">
		<div class="icon screen"></div>
		<div class="tooltip">
			<div class="arrow"></div>
			Volledig scherm
		</div>
	</div>
	<div id="cache" class="button">
		<div class="icon cache"></div>
		<div class="tooltip">
			<div class="arrow"></div>
			Leeg cache/geheugen
		</div>
	</div>
	<div id="zoomOut" class="button">
		<div class="icon out"></div>
		<div class="tooltip">
			<div class="arrow"></div>
			Zoom -1%
		</div>
	</div>
	<div id="zoomIn" class="button">
		<div class="icon in"></div>
		<div class="tooltip">
			<div class="arrow"></div>
			Zoom +1%
		</div>
	</div>
</div>
<div id="messages"></div>
<script>
    const {ipcRenderer} = require('electron');
    const updater = document.getElementById("updater");
    const progression = document.getElementById("progression");
    const version = document.getElementById("version");

    ipcRenderer.on("version", (event, data) => {
        version.innerHTML = data;
    });

    ipcRenderer.on("checking-for-update", (event, data) => {
        updater.style.display = "block";
    });

    ipcRenderer.on("update-not-available", (event, data) => {
        updater.style.display = "none";
        updater.innerHTML = "";
    });

    ipcRenderer.on("download-progress", (event, data) => {
        progression.innerHTML = "installeren... " + Math.round(data['percent']) + "%";
    });

    const home = document.getElementById("home");
    const hotel = document.getElementById("hotel");
    const zoomIn = document.getElementById("zoomIn");
    const zoomOut = document.getElementById("zoomOut");
    const screen = document.getElementById("screen");

    let hotelFrame = document.getElementById("hotel-frame");
    let homeFrame = document.getElementById("home-frame");
    let hotelButton = document.getElementById("hotel");
    let homeButton = document.getElementById("home");

    function enterHotel() {
        if (!hotelFrame) {
            hotelFrame = document.createElement("iframe");
            hotelFrame.id = "home-frame";
            hotelFrame.width = "100%";
            hotelFrame.src = "https://www.leet.ws/client";
            document.body.appendChild(hotelFrame)
        } else {
            hotelFrame.src = "https://www.leet.ws/client";
        }

        showHotelScreen();
    }

    function showHomeScreen() {
        hotelFrame.style.visibility = "hidden";
        homeFrame.style.visibility = "visible";
        hotelButton.style.display = "flex";
        homeButton.style.display = "none";
    }

    function showHotelScreen() {
        hotelFrame.style.visibility = "visible";
        homeFrame.style.visibility = "hidden";
        hotelButton.style.display = "none";
        homeButton.style.display = "flex";
    }

    home.addEventListener('click', () => {
        if (!hotelFrame) {
            homeFrame.src = "https://www.leet.ws/?app=true";
            return;
        }

        showHomeScreen();
    });

    hotel.addEventListener('click', () => {
        showHotelScreen()
    });

    zoomIn.addEventListener('click', () => {
        ipcRenderer.send("zoomIn", "");
    });
    screen.addEventListener('click', () => {
        ipcRenderer.send("fullscreen", "");
    });
    zoomOut.addEventListener('click', () => {
        ipcRenderer.send("zoomOut", "");
    });


    const alert = document.getElementById("alert");
    const cancel = document.getElementById("cancel");
    const confirm = document.getElementById("confirm");
    const description = document.getElementById("description");
    cancel.onclick = () => {
        alert.style.visibility = "hidden";
    };

    const cache = document.getElementById("cache");
    cache.addEventListener('click', () => {
        alert.style.visibility = "visible";
        confirm.onclick = () => {
            ipcRenderer.send("clearcache", "");
        };
    });
</script>
</body>
</html>